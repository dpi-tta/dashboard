<div class="card-footer">
  <h6>Comments</h6>

  <ul>
    <% impression.impression_comments.each do |comment| %>
      <li id="<%= dom_id(comment) %>">
        <strong><%= comment.user.name %></strong>: <%= comment.content %>
        <% if policy(comment).destroy? %>
          <%= button_to impression_impression_comment_path(impression, comment), 
              method: :delete, 
              data: { turbo_confirm: "Are you sure you want to delete this comment?" }, 
              class: "btn btn-link btn-sm float-end p-0" do %>
            <i class="fa-solid fa-trash text-danger"></i>
          <% end %>
        <% end %>
      </li>
    <% end %>
  </ul>

  <%= form_with(model: [impression, ImpressionComment.new], local: true) do |form| %>
    <div class="form-group">
      <%= form.label :content, "Add a comment:" %>
      <%= form.text_area :content, class: "form-control", rows: 3 %>
    </div>
    <%= form.submit "Submit", class: "btn btn-primary mt-2" %>
  <% end %>
</div>