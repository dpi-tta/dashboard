<turbo-stream action="update" target="search">
  
  <template>
    <% if @subjects.length == 0 %>
      <%= "No subjects found" %>
    <% else %>
      
      <% if @comes_from_cohort %>
        <div>
          <% @subjects.each do |subject| %>
            <div class="option" data-action="click->search-subject#select" data-subject-id="<%= subject.id %>" data-subject-name="<%= subject.user.full_name %>">
              <i class="fa-regular fa-user"></i>
              <%= highlight(subject.user.full_name, params.dig(:subject_search)) %>
            </div>
          <% end %>
        </div>
      <% else %>
        <%# if request is NOT coming from Cohort::Impressions, add cohort name to options list %>
        <div>
          <% @subjects.each do |subject| %>
            <div class="option" data-action="click->search-subject#select" data-subject-id="<%= subject.id %>" data-subject-name="<%= subject.user.full_name %>">
              <i class="fa-regular fa-user"></i>
              <%= highlight(subject.user.full_name, params.dig(:subject_search)) %>
                -
              <%= subject.cohort.name %>
            </div>
          <% end %>
        </div>  
      <% end %>
    <% end %>
  </template>

</turbo-stream>
